---
title: "Cancensus Centroid"
output: html_document
date: "2023-05-21"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
install.packages("cancensus")
library(cancensus)
library(sf)
install.packages('geojsonsf')
library(geojsonsf)
options(cancensus.api_key = "CensusMapper_1d16ff8ad5e8a65ff028959182ac4940")
```
Hamilton CMA: "35537"

Income Vector:Income statistics in 2020 for the population aged 15 years and over in private households: "v_CA21_599"
Education Vector: Total - Highest certificate, diploma or degree for the population aged 15 years and over in private households - "v_CA21_5817"
Gender Vector:
Age Vector: Total Age - "v_CA21_8"
Ethnicity Vector: Total - Ethnic or cultural origin for the population in private households : "v_CA21_4917"]
```{r}
census_data <- get_census(dataset='CA21', regions=list(CSD="3525005"),
                          vectors=c("v_CA21_10","v_CA21_9","v_CA21_8","v_CA21_601","v_CA21_600","v_CA21_646","v_CA21_645","v_CA21_4873","v_CA21_4874","v_CA21_4918","v_CA21_4919","v_CA21_5800","v_CA21_5801","v_CA21_5809","v_CA21_5810","v_CA21_5818","v_CA21_5819"),
                          level='DA', use_cache = FALSE, geo_format = 'sf', quiet = TRUE)
```

I believe this is what I was supposed to do, get a centroid for the DA? and then the coordinates for that? I am not 100% sure if that's what I am exactly supposed to do. 
```{r}
census_cent <- st_centroid(census_data$geometry)
census_coord <- st_coordinates(census_cent) |> data.frame() #making it a data.frame()
```

Adding the coordinates of the DA's into the census_data dataframe 
```{r}
library(dplyr)

DA_census_data <- census_data %>%
  bind_cols(census_coord %>% 
              rename(Latitude = Y, Longitude = X))
```


I was having some issues with creating the csv for the DA census data for some reason, and that has resulted in it not being able to be used properly when creating the travel times, so I am going to make a csv of just the DA name and coordinates to be used.
```{r}
library(sf)

# Assuming "df" is your dataframe with the "geometry" column
DA_test <- st_drop_geometry(DA_census_data)
```


```{r}
# Write the selected columns to a CSV file
write.csv(DA_test, file = "DA_select.csv", row.names = FALSE)
```

